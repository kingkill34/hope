<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.inng.haircut.dao.TestUserDao"> 

  
    <!-- 获取用户集合 -->
    <select id="getList" resultType="user"> 
      select id,
      		 username,
      		 password,
      		 reg_time 
      		 from user 
      		 order by reg_time desc 
      		 limit #{pagination},#{pageSize}
       <!-- 这里sql结尾不能加分号，否则报“ORA-00911”的错误 --> 
    </select> 
    
     <!-- 获取用户数量count -->
    <select id="count" resultType="Integer"> 
      select count(id) from user
    </select> 
 
    
    <!-- 登录 -->
    <select id="login" parameterType="user" resultType="testUser"> 
        select * from tb_user where userName = #{userName} and password = #{password}
    </select>
    
   
    <select id="getNumber" resultType="Integer"> 
        select number from tb_user where userName = #{userName}
    </select>
    
    
    <update id="updateNumber">
         update tb_user set number=#{number} where userName = #{userName}
    </update>
    
   
    
    
    <update id="updateFlag">
         update tb_user set flag=#{flag} where userName = #{userName}
    </update>
    
    
    <!-- 删除用户 -->
   	<delete id="delUserById" parameterType="Integer">
   	    delete from user where id=#{id}
   	</delete>
   	
   	<insert id="addUser" parameterType="User">
   	    insert into user set userName = #{userName}, password = #{password} , reg_time =#{reg_time}
   	</insert>
</mapper>